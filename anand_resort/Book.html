<html>
<head>
    <title> Booking Page
    </title>
    <link rel="stylesheet" href="book.css">
    <script src="book.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Lucida+Sans" rel="stylesheet">
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>


    <!--AJAX CODING TO BRIDGE BACKEND-->
    <script>
    $(document).ready(function(){
    $('#availability').click(function(event){
           event.preventDefault(); // prevent default behavior of link click
           // now make an AJAX request to server_side_file.php by passing some data
           var SendInfo = { "roomType" : $('#room_type').val(), "fromDate" : $('#fromDate').val(), "toDate": $('#toDate').val() }
           //alert(JSON.stringify(SendInfo));
   $.ajax({
            type: 'POST',
            url: 'http://localhost:8080/availability',
            headers : {'Content-Type' : 'application/json'
                     },
            data: JSON.stringify(SendInfo),
            traditional: true,
            success: function (data) {
                if(data[0].roomCount > 0){
                    //Positive Redirect
                    window.location='BookForm.html'

                }else{
                  //Negative 
                }

            }
        });
   });
});
</script>
  





<!--REMEMBER ONLY THIS DATE FORMAT WORKS: yyyy-mm-dd--> 
</head>
<body>
  <!--Availability Check-->
  <form class="form-style-7">
    <ul>
    <li>
        <label for="name"><b>Room Type</b></label>
        <select name="room_type" id="room_type" required>
            <option value="none" selected disabled hidden>Select Room Type</option>
            <option value="1">Suite</option>
            <option value="2">Family</option>
            <option value="3">Deluxe</option>
            <option value="4">Classic</option>
            <option value="5">Superior</option>
            <option value="6">Luxury</option>
        </select>
        <span>Suite / Family / Deluxe / Classic / Superior / Luxury</span>
    </li>
    <li>
        <label for="email"><b>From Date</b></label>
        <div class="from_date">
            <input id="fromDate" type="date" class='from_date_input'>
        </div>
        <span>Start of Stay</span>
    </li>
    <li>
        <label for="url"><b>To Date</b></label>
        <div class="to_date">
            <input id="toDate" type="date" class='to_date_input'>
        </div>
        <span>End of Stay</span>
    </li>
    <li>
        <label for="bio"><b>No. of Guests</b></label>
        <select name="no_guests" id="no_guests" required>
            <option value="none" selected disabled hidden>Select Number of Guests</option>
            <option value="one">1</option>
            <option value="two">2</option>
            <option value="three">3</option>
            <option value="four">4</option>
        </select>
        <span>Minimum: 1 and Maximum: 4</span>
    </li>
    <li>
        <div class="home_btn_heading">
            <a id="availability" class="btn1 btn2"><b> Check Availability </b></a>
            <a href="Home.html" class="btn1 btn2"><b> Back Home </b></a>
        </div>
    </li>
    </ul>
    </form>





    
</body>
</html>